/**
 * @license
 * Lo-Dash 2.4.1 (Custom Build) lodash.com/license | Underscore.js 1.5.2 underscorejs.org/LICENSE
 * Build: `lodash backbone --minify --output js/vendor/lodash.gruntbuild.min.js`
 */
(function(){function t(t,e,n){n=(n||0)-1;for(var r=t?t.length:0;++n<r;)if(t[n]===e)return n;return-1}function e(t,e){for(var n=t.m,r=e.m,i=-1,o=n.length;++i<o;){var s=n[i],a=r[i];if(s!==a){if(s>a||"undefined"==typeof s)return 1;if(a>s||"undefined"==typeof a)return-1}}return t.n-e.n}function n(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);var r=-1;n=n-e||0;for(var i=Array(0>n?0:n);++r<n;)i[r]=t[e+r];return i}function r(t){return t instanceof r?t:new i(t)}function i(t,e){this.__chain__=!!e,this.__wrapped__=t}function o(t){function e(){if(i){var t=n(i);he.apply(t,arguments)}if(this instanceof e){var a=s(r.prototype),t=r.apply(a,t||arguments);return w(t)?t:a}return r.apply(o,t||arguments)}var r=t[0],i=t[2],o=t[4];return e}function s(t){return w(t)?de(t):{}}function a(t,e,n){if("function"!=typeof t)return q;if("undefined"==typeof e||!("prototype"in t))return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return H(t,e)}function u(t){function e(){var t=h?c:this;if(o){var v=n(o);he.apply(v,arguments)}return(a||d)&&(v||(v=n(arguments)),a&&he.apply(v,a),d&&v.length<l)?(i|=16,u([r,p?i:-4&i,v,null,c,l])):(v||(v=arguments),f&&(r=t[g]),this instanceof e?(t=s(r.prototype),v=r.apply(t,v),w(v)?v:t):r.apply(t,v))}var r=t[0],i=t[1],o=t[2],a=t[3],c=t[4],l=t[5],h=1&i,f=2&i,d=4&i,p=8&i,g=r;return e}function c(t,e){for(var n=-1,r=g(),i=t?t.length:0,o=[];++n<i;){var s=t[n];0>r(e,s)&&o.push(s)}return o}function l(t,e,n,r){r=(r||0)-1;for(var i=t?t.length:0,o=[];++r<i;){var s=t[r];if(s&&"object"==typeof s&&"number"==typeof s.length&&(_e(s)||m(s))){e||(s=l(s,e,n));var a=-1,u=s.length,c=o.length;for(o.length+=u;++a<u;)o[c++]=s[a]}else n||o.push(s)}return o}function h(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(t===t&&!(t&&te[typeof t]||e&&te[typeof e]))return!1;if(null==t||null==e)return t===e;var o=ae.call(t),s=ae.call(e);if(o!=s)return!1;switch(o){case W:case X:return+t==+e;case G:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case Z:case K:return t==e+""}if(s=o==V,!s){var a=t instanceof r,u=e instanceof r;if(a||u)return h(a?t.__wrapped__:t,u?e.__wrapped__:e,n,i);if(o!=Y)return!1;if(o=t.constructor,a=e.constructor,o!=a&&!(_(o)&&o instanceof o&&_(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}for(n||(n=[]),i||(i=[]),o=n.length;o--;)if(n[o]==t)return i[o]==e;var c=!0,l=0;if(n.push(t),i.push(e),s){if(l=e.length,c=l==t.length)for(;l--&&(c=h(t[l],e[l],n,i)););}else Ee(e,function(e,r,o){return le.call(o,r)?(l++,!(c=le.call(t,r)&&h(t[r],e,n,i))&&L):void 0}),c&&Ee(t,function(t,e,n){return le.call(n,e)?!(c=-1<--l)&&L:void 0});return n.pop(),i.pop(),c}function f(t){return function(e,n,r){var i={};n=B(n,r,3),r=-1;var o=e?e.length:0;if("number"==typeof o)for(;++r<o;){var s=e[r];t(i,s,n(s,r,e),e)}else Se(e,function(e,r,o){t(i,e,n(e,r,o),o)});return i}}function d(t,e,n,r,i,s){var a=16&e,c=32&e;if(!(2&e||_(t)))throw new TypeError;return a&&!n.length&&(e&=-17,n=!1),c&&!r.length&&(e&=-33,r=!1),(1==e||17===e?o:u)([t,e,n,r,i,s])}function p(t){return xe[t]}function g(){var e=(e=r.indexOf)===M?t:e;return e}function v(t){return"function"==typeof t&&ue.test(t)}function m(t){return t&&"object"==typeof t&&"number"==typeof t.length&&ae.call(t)==D||!1}function y(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)t[i]=r[i]}return t}function b(t){var e=[];return Ee(t,function(t,n){_(t)&&e.push(n)}),e.sort()}function _(t){return"function"==typeof t}function w(t){return!(!t||!te[typeof t])}function x(t){return"string"==typeof t||t&&"object"==typeof t&&ae.call(t)==K||!1}function A(t){for(var e=-1,n=we(t),r=n.length,i=Array(r);++e<r;)i[e]=t[n[e]];return i}function E(t,e){var n=g(),r=t?t.length:0,i=!1;return r&&"number"==typeof r?i=-1<n(t,e):Se(t,function(t){return(i=t===e)&&L}),i}function S(t,e,n){var r=!0;e=B(e,n,3),n=-1;var i=t?t.length:0;if("number"==typeof i)for(;++n<i&&(r=!!e(t[n],n,t)););else Se(t,function(t,n,i){return!(r=!!e(t,n,i))&&L});return r}function k(t,e,n){var r=[];e=B(e,n,3),n=-1;var i=t?t.length:0;if("number"==typeof i)for(;++n<i;){var o=t[n];e(o,n,t)&&r.push(o)}else Se(t,function(t,n,i){e(t,n,i)&&r.push(t)});return r}function T(t,e,n){e=B(e,n,3),n=-1;var r=t?t.length:0;if("number"!=typeof r){var i;return Se(t,function(t,n,r){return e(t,n,r)?(i=t,L):void 0}),i}for(;++n<r;){var o=t[n];if(e(o,n,t))return o}}function j(t,e,n){var r=-1,i=t?t.length:0;if(e=e&&"undefined"==typeof n?e:a(e,n,3),"number"==typeof i)for(;++r<i&&e(t[r],r,t)!==L;);else Se(t,e)}function O(t,e){var n=t?t.length:0;if("number"==typeof n)for(;n--&&!1!==e(t[n],n,t););else{var r=we(t),n=r.length;Se(t,function(t,i,o){return i=r?r[--n]:--n,!1===e(o[i],i,o)&&L})}}function R(t,e,n){var r=-1,i=t?t.length:0;if(e=B(e,n,3),"number"==typeof i)for(var o=Array(i);++r<i;)o[r]=e(t[r],r,t);else o=[],Se(t,function(t,n,i){o[++r]=e(t,n,i)});return o}function N(t,e,n,r){if(!t)return n;var i=3>arguments.length;e=B(e,r,4);var o=-1,s=t.length;if("number"==typeof s)for(i&&(n=t[++o]);++o<s;)n=e(n,t[o],o,t);else Se(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)});return n}function $(t,e,n,r){var i=3>arguments.length;return e=B(e,r,4),O(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function P(t,e,n){var r;e=B(e,n,3),n=-1;var i=t?t.length:0;if("number"==typeof i)for(;++n<i&&!(r=e(t[n],n,t)););else Se(t,function(t,n,i){return(r=e(t,n,i))&&L});return!!r}function I(t,e,r){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var s=-1;for(e=B(e,r,3);++s<o&&e(t[s],s,t);)i++}else if(i=e,null==i||r)return t?t[0]:Q;return n(t,0,me(ve(0,i),o))}function M(e,n,r){if("number"==typeof r){var i=e?e.length:0;r=0>r?ve(0,i+r):r||0}else if(r)return r=U(e,n),e[r]===n?r:-1;return t(e,n,r)}function C(t,e,r){if("number"!=typeof e&&null!=e){var i=0,o=-1,s=t?t.length:0;for(e=B(e,r,3);++o<s&&e(t[o],o,t);)i++}else i=null==e||r?1:ve(0,e);return n(t,i)}function U(t,e,n,r){var i=0,o=t?t.length:i;for(n=n?B(n,r,1):q,e=n(e);o>i;)r=i+o>>>1,n(t[r])<e?i=r+1:o=r;return i}function H(t,e){return 2<arguments.length?d(t,17,n(arguments,2),null,e):d(t,1,null,null,e)}function B(t,e,n){var r=typeof t;if(null==t||"function"==r)return a(t,e,n);if("object"!=r)return F(t);var i=we(t);return function(e){for(var n=i.length,r=!1;n--&&(r=e[i[n]]===t[i[n]]););return r}}function q(t){return t}function z(t){j(b(t),function(e){var n=r[e]=t[e];r.prototype[e]=function(){var t=[this.__wrapped__];return he.apply(t,arguments),t=n.apply(r,t),this.__chain__?new i(t,!0):t}})}function F(t){return function(e){return e[t]}}var Q,J=0,L={},D="[object Arguments]",V="[object Array]",W="[object Boolean]",X="[object Date]",G="[object Number]",Y="[object Object]",Z="[object RegExp]",K="[object String]",te={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},ee=te[typeof window]&&window||this,ne=te[typeof exports]&&exports&&!exports.nodeType&&exports,re=te[typeof module]&&module&&!module.nodeType&&module,ie=re&&re.exports===ne&&ne,oe=te[typeof global]&&global;!oe||oe.global!==oe&&oe.window!==oe||(ee=oe);var se=[],oe=Object.prototype,ae=oe.toString,ue=RegExp("^"+(ae+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ce=Math.floor,le=oe.hasOwnProperty,he=se.push,fe=oe.propertyIsEnumerable,de=v(de=Object.create)&&de,pe=v(pe=Array.isArray)&&pe,ge=v(ge=Object.keys)&&ge,ve=Math.max,me=Math.min,ye=Math.random;i.prototype=r.prototype;var be={};!function(){var t={0:1,length:1};be.spliceObjects=(se.splice.call(t,0,1),!t[0])}(1),de||(s=function(){function t(){}return function(e){if(w(e)){t.prototype=e;var n=new t;t.prototype=null}return n||ee.Object()}}()),m(arguments)||(m=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&le.call(t,"callee")&&!fe.call(t,"callee")||!1});var _e=pe||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&ae.call(t)==V||!1},pe=function(t){var e,n=[];if(!t||!te[typeof t])return n;for(e in t)le.call(t,e)&&n.push(e);return n},we=ge?function(t){return w(t)?ge(t):[]}:pe,xe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Ae=RegExp("["+we(xe).join("")+"]","g"),Ee=function(t,e){var n;if(!t||!te[typeof t])return t;for(n in t)if(e(t[n],n,t)===L)break;return t},Se=function(t,e){var n;if(!t||!te[typeof t])return t;for(n in t)if(le.call(t,n)&&e(t[n],n,t)===L)break;return t};_(/x/)&&(_=function(t){return"function"==typeof t&&"[object Function]"==ae.call(t)}),pe=f(function(t,e,n){le.call(t,n)?t[n]++:t[n]=1}),oe=f(function(t,e,n){(le.call(t,n)?t[n]:t[n]=[]).push(e)}),r.bind=H,r.bindAll=function(t){for(var e=1<arguments.length?l(arguments,!0,!1,1):b(t),n=-1,r=e.length;++n<r;){var i=e[n];t[i]=d(t[i],1,null,null,t)}return t},r.chain=function(t){return t=new i(t),t.__chain__=!0,t},r.countBy=pe,r.defaults=function(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)"undefined"==typeof t[i]&&(t[i]=r[i])}return t},r.difference=function(t){return c(t,l(arguments,!0,!0,1))},r.filter=k,r.forEach=j,r.functions=b,r.groupBy=oe,r.initial=function(t,e,r){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var s=o;for(e=B(e,r,3);s--&&e(t[s],s,t);)i++}else i=null==e||r?1:e||i;return n(t,0,me(ve(0,o-i),o))},r.invert=function(t){for(var e=-1,n=we(t),r=n.length,i={};++e<r;){var o=n[e];i[t[o]]=o}return i},r.invoke=function(t,e){var r=n(arguments,2),i=-1,o="function"==typeof e,s=t?t.length:0,a=Array("number"==typeof s?s:0);return j(t,function(t){a[++i]=(o?e:t[e]).apply(t,r)}),a},r.keys=we,r.map=R,r.max=function(t,e,n){var r=-1/0,i=r;"function"!=typeof e&&n&&n[e]===t&&(e=null);var o=-1,s=t?t.length:0;if(null==e&&"number"==typeof s)for(;++o<s;)n=t[o],n>i&&(i=n);else e=B(e,n,3),j(t,function(t,n,o){n=e(t,n,o),n>r&&(r=n,i=t)});return i},r.min=function(t,e,n){var r=1/0,i=r;"function"!=typeof e&&n&&n[e]===t&&(e=null);var o=-1,s=t?t.length:0;if(null==e&&"number"==typeof s)for(;++o<s;)n=t[o],i>n&&(i=n);else e=B(e,n,3),j(t,function(t,n,o){n=e(t,n,o),r>n&&(r=n,i=t)});return i},r.omit=function(t){var e=[];Ee(t,function(t,n){e.push(n)});for(var e=c(e,l(arguments,!0,!1,1)),n=-1,r=e.length,i={};++n<r;){var o=e[n];i[o]=t[o]}return i},r.once=function(t){var e,n;if(!_(t))throw new TypeError;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},r.pairs=function(t){for(var e=-1,n=we(t),r=n.length,i=Array(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i},r.pick=function(t){for(var e=-1,n=l(arguments,!0,!1,1),r=n.length,i={};++e<r;){var o=n[e];o in t&&(i[o]=t[o])}return i},r.reject=function(t,e,n){return e=B(e,n,3),k(t,function(t,n,r){return!e(t,n,r)})},r.rest=C,r.shuffle=function(t){var e=-1,n=t?t.length:0,r=Array("number"==typeof n?n:0);return j(t,function(t){var n;n=++e,n=0+ce(ye()*(n-0+1)),r[e]=r[n],r[n]=t}),r},r.sortBy=function(t,n,r){var i=-1,o=t?t.length:0,s=Array("number"==typeof o?o:0);for(n=B(n,r,3),j(t,function(t,e,r){s[++i]={m:[n(t,e,r)],n:i,o:t}}),o=s.length,s.sort(e);o--;)s[o]=s[o].o;return s},r.toArray=function(t){return _e(t)?n(t):t&&"number"==typeof t.length?R(t):A(t)},r.values=A,r.without=function(t){return c(t,n(arguments,1))},r.collect=R,r.drop=C,r.each=j,r.extend=y,r.methods=b,r.select=k,r.tail=C,r.clone=function(t){return w(t)?_e(t)?n(t):y({},t):t},r.contains=E,r.escape=function(t){return null==t?"":(t+"").replace(Ae,p)},r.every=S,r.find=T,r.has=function(t,e){return t?le.call(t,e):!1},r.identity=q,r.indexOf=M,r.isArguments=m,r.isArray=_e,r.isEmpty=function(t){if(!t)return!0;if(_e(t)||x(t))return!t.length;for(var e in t)if(le.call(t,e))return!1;return!0},r.isEqual=function(t,e){return h(t,e)},r.isFunction=_,r.isObject=w,r.isRegExp=function(t){return t&&te[typeof t]&&ae.call(t)==Z||!1},r.isString=x,r.lastIndexOf=function(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?ve(0,r+n):me(n,r-1))+1);r--;)if(t[r]===e)return r;return-1},r.mixin=z,r.reduce=N,r.reduceRight=$,r.result=function(t,e){if(t){var n=t[e];return _(n)?t[e]():n}},r.size=function(t){var e=t?t.length:0;return"number"==typeof e?e:we(t).length},r.some=P,r.sortedIndex=U,r.uniqueId=function(t){var e=++J+"";return t?t+e:e},r.all=S,r.any=P,r.detect=T,r.foldl=N,r.foldr=$,r.include=E,r.inject=N,r.first=I,r.last=function(t,e,r){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var s=o;for(e=B(e,r,3);s--&&e(t[s],s,t);)i++}else if(i=e,null==i||r)return t?t[o-1]:Q;return n(t,ve(0,o-i))},r.take=I,r.head=I,z(r),r.VERSION="2.4.1",r.prototype.chain=function(){return this.__chain__=!0,this},r.prototype.value=function(){return this.__wrapped__},j("pop push reverse shift sort splice unshift".split(" "),function(t){var e=se[t];r.prototype[t]=function(){var t=this.__wrapped__;return e.apply(t,arguments),be.spliceObjects||0!==t.length||delete t[0],this}}),j(["concat","join","slice"],function(t){var e=se[t];r.prototype[t]=function(){var t=e.apply(this.__wrapped__,arguments);return this.__chain__&&(t=new i(t),t.__chain__=!0),t}}),ne&&re?ie?(re.exports=r)._=r:ne._=r:ee._=r}).call(this),/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2013 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.9.3
 *
 */
function(t,e,n,r){var i=t(e);t.fn.lazyload=function(o){function s(){var e=0;u.each(function(){var n=t(this);if(!c.skip_invisible||n.is(":visible"))if(t.abovethetop(this,c)||t.leftofbegin(this,c));else if(t.belowthefold(this,c)||t.rightoffold(this,c)){if(++e>c.failure_limit)return!1}else n.trigger("appear"),e=0})}var a,u=this,c={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return o&&(r!==o.failurelimit&&(o.failure_limit=o.failurelimit,delete o.failurelimit),r!==o.effectspeed&&(o.effect_speed=o.effectspeed,delete o.effectspeed),t.extend(c,o)),a=c.container===r||c.container===e?i:t(c.container),0===c.event.indexOf("scroll")&&a.bind(c.event,function(){return s()}),this.each(function(){var e=this,n=t(e);e.loaded=!1,(n.attr("src")===r||n.attr("src")===!1)&&n.is("img")&&n.attr("src",c.placeholder),n.one("appear",function(){if(!this.loaded){if(c.appear){var r=u.length;c.appear.call(e,r,c)}t("<img />").bind("load",function(){var r=n.attr("data-"+c.data_attribute);n.hide(),n.is("img")?n.attr("src",r):n.css("background-image","url('"+r+"')"),n[c.effect](c.effect_speed),e.loaded=!0;var i=t.grep(u,function(t){return!t.loaded});if(u=t(i),c.load){var o=u.length;c.load.call(e,o,c)}}).attr("src",n.attr("data-"+c.data_attribute))}}),0!==c.event.indexOf("scroll")&&n.bind(c.event,function(){e.loaded||n.trigger("appear")})}),i.bind("resize",function(){s()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&u.each(function(){t(this).trigger("appear")})}),t(n).ready(function(){s()}),this},t.belowthefold=function(n,o){var s;return s=o.container===r||o.container===e?(e.innerHeight?e.innerHeight:i.height())+i.scrollTop():t(o.container).offset().top+t(o.container).height(),s<=t(n).offset().top-o.threshold},t.rightoffold=function(n,o){var s;return s=o.container===r||o.container===e?i.width()+i.scrollLeft():t(o.container).offset().left+t(o.container).width(),s<=t(n).offset().left-o.threshold},t.abovethetop=function(n,o){var s;return s=o.container===r||o.container===e?i.scrollTop():t(o.container).offset().top,s>=t(n).offset().top+o.threshold+t(n).height()},t.leftofbegin=function(n,o){var s;return s=o.container===r||o.container===e?i.scrollLeft():t(o.container).offset().left,s>=t(n).offset().left+o.threshold+t(n).width()},t.inviewport=function(e,n){return!(t.rightoffold(e,n)||t.leftofbegin(e,n)||t.belowthefold(e,n)||t.abovethetop(e,n))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document),function(){var t=jQuery.event.special,e="D"+ +new Date,n="D"+(+new Date+1);t.scrollstart={setup:function(){var n,r=function(e){var r=this,i=arguments;n?clearTimeout(n):(e.type="scrollstart",jQuery.event.dispatch.apply(r,i)),n=setTimeout(function(){n=null},t.scrollstop.latency)};jQuery(this).bind("scroll",r).data(e,r)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(e))}},t.scrollstop={latency:300,setup:function(){var e,r=function(n){var r=this,i=arguments;e&&clearTimeout(e),e=setTimeout(function(){e=null,n.type="scrollstop",jQuery.event.dispatch.apply(r,i)},t.scrollstop.latency)};jQuery(this).bind("scroll",r).data(n,r)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(n))}}}(),!function(t){var e=/iPhone/i,n=/iPod/i,r=/iPad/i,i=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,o=/Android/i,s=/IEMobile/i,a=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,u=/BlackBerry/i,c=/BB10/i,l=/Opera Mini/i,h=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,f=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),d=function(t,e){return t.test(e)},p=function(t){var p=t||navigator.userAgent;return this.apple={phone:d(e,p),ipod:d(n,p),tablet:d(r,p),device:d(e,p)||d(n,p)||d(r,p)},this.android={phone:d(i,p),tablet:!d(i,p)&&d(o,p),device:d(i,p)||d(o,p)},this.windows={phone:d(s,p),tablet:d(a,p),device:d(s,p)||d(a,p)},this.other={blackberry:d(u,p),blackberry10:d(c,p),opera:d(l,p),firefox:d(h,p),device:d(u,p)||d(c,p)||d(l,p)||d(h,p)},this.seven_inch=d(f,p),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},g=function(){var t=new p;return t.Class=p,t};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=p:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=g():"function"==typeof define&&define.amd?define(t.isMobile=g()):t.isMobile=g()}(this),//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org
function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,r,i){t.Backbone=e(t,i,n,r)});else if("undefined"!=typeof exports){var n=require("underscore");e(t,exports,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,r){{var i=t.Backbone,o=[],s=(o.push,o.slice);o.splice}e.VERSION="1.1.2",e.$=r,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,r){if(!c(this,"once",t,[e,r])||!e)return this;var i=this,o=n.once(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,r)},off:function(t,e,r){var i,o,s,a,u,l,h,f;if(!this._events||!c(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events=void 0,this;for(a=t?[t]:n.keys(this._events),u=0,l=a.length;l>u;u++)if(t=a[u],s=this._events[t]){if(this._events[t]=i=[],e||r)for(h=0,f=s.length;f>h;h++)o=s[h],(e&&e!==o.callback&&e!==o.callback._callback||r&&r!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&l(n,e),r&&l(r,arguments),this},stopListening:function(t,e,r){var i=this._listeningTo;if(!i)return this;var o=!e&&!r;r||"object"!=typeof e||(r=this),t&&((i={})[t._listenId]=t);for(var s in i)t=i[s],t.off(e,r,this),(o||n.isEmpty(t._events))&&delete this._listeningTo[s];return this}},u=/\s+/,c=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(r));return!1}return!0},l=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},h={listenTo:"on",listenToOnce:"once"};n.each(h,function(t,e){a[e]=function(e,r,i){var o=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=n.uniqueId("l"));return o[s]=e,i||"object"!=typeof r||(i=this),e[t](r,i,this),this}}),a.bind=a.on,a.unbind=a.off,n.extend(e,a);var f=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(f.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,r){var i,o,s,a,u,c,l,h;if(null==t)return this;if("object"==typeof t?(o=t,r=e):(o={})[t]=e,r||(r={}),!this._validate(o,r))return!1;s=r.unset,u=r.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),h=this.attributes,l=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)e=o[i],n.isEqual(h[i],e)||a.push(i),n.isEqual(l[i],e)?delete this.changed[i]:this.changed[i]=e,s?delete h[i]:h[i]=e;if(!u){a.length&&(this._pending=r);for(var f=0,d=a.length;d>f;f++)this.trigger("change:"+a[f],this,h[a[f]],r)}if(c)return this;if(!u)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in t)n.isEqual(i[o],e=t[o])||((r||(r={}))[o]=e);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,r=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(r&&r(e,n,t),void e.trigger("sync",e,n,t)):!1},U(this,t),this.sync("read",this,t)},save:function(t,e,r){var i,o,s,a=this.attributes;if(null==t||"object"==typeof t?(i=t,r=e):(i={})[t]=e,r=n.extend({validate:!0},r),i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},a,i)),void 0===r.parse&&(r.parse=!0);var u=this,c=r.success;return r.success=function(t){u.attributes=a;var e=u.parse(t,r);return r.wait&&(e=n.extend(i||{},e)),n.isObject(e)&&!u.set(e,r)?!1:(c&&c(u,t,r),void u.trigger("sync",u,t,r))},U(this,r),o=this.isNew()?"create":r.patch?"patch":"update","patch"===o&&(r.attrs=i),s=this.sync(o,this,r),i&&r.wait&&(this.attributes=a),s},destroy:function(t){t=t?n.clone(t):{};var e=this,r=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&i(),r&&r(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;U(this,t);var o=this.sync("delete",this,t);return t.wait||i(),o},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||C();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return r?(this.trigger("invalid",this,r,n.extend(e,{validationError:r})),!1):!0}});var d=["keys","values","pairs","invert","pick","omit"];n.each(d,function(t){f.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};n.extend(p.prototype,a,{model:f,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,v))},remove:function(t,e){var r=!n.isArray(t);t=r?[t]:n.clone(t),e||(e={});var i,o,s,a;for(i=0,o=t.length;o>i;i++)a=t[i]=this.get(t[i]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a,e));return r?t[0]:t},set:function(t,e){e=n.defaults({},e,g),e.parse&&(t=this.parse(t,e));var r=!n.isArray(t);t=r?t?[t]:[]:n.clone(t);var i,o,s,a,u,c,l,h=e.at,d=this.model,p=this.comparator&&null==h&&e.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},_=e.add,w=e.merge,x=e.remove,A=!p&&_&&x?[]:!1;for(i=0,o=t.length;o>i;i++){if(u=t[i]||{},s=u instanceof f?a=u:u[d.prototype.idAttribute||"id"],c=this.get(s))x&&(b[c.cid]=!0),w&&(u=u===a?a.attributes:u,e.parse&&(u=c.parse(u,e)),c.set(u,e),p&&!l&&c.hasChanged(v)&&(l=!0)),t[i]=c;else if(_){if(a=t[i]=this._prepareModel(u,e),!a)continue;m.push(a),this._addReference(a,e)}a=c||a,!A||!a.isNew()&&b[a.id]||A.push(a),b[a.id]=!0}if(x){for(i=0,o=this.length;o>i;++i)b[(a=this.models[i]).cid]||y.push(a);y.length&&this.remove(y,e)}if(m.length||A&&A.length)if(p&&(l=!0),this.length+=m.length,null!=h)for(i=0,o=m.length;o>i;i++)this.models.splice(h+i,0,m[i]);else{A&&(this.models.length=0);var E=A||m;for(i=0,o=E.length;o>i;i++)this.models.push(E[i])}if(l&&this.sort({silent:!0}),!e.silent){for(i=0,o=m.length;o>i;i++)(a=m[i]).trigger("add",a,this,e);(l||A&&A.length)&&this.trigger("sort",this,e)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var r=0,i=this.models.length;i>r;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,r=this;return t.success=function(n){var i=t.reset?"reset":"set";r[i](n,t),e&&e(r,n,t),r.trigger("sync",r,n,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var r=this,i=e.success;return e.success=function(t,n){e.wait&&r.add(t,e),i&&i(t,n,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof f)return t;e=e?n.clone(e):{},e.collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(m,function(t){p.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(t){p.prototype[t]=function(e,r){var i=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,i,r)}});var b=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var r=t[e];if(n.isFunction(r)||(r=this[t[e]]),r){var i=e.match(_),o=i[1],s=i[2];r=n.bind(r,this),o+=".delegateEvents"+this.cid,""===s?this.$el.on(o,r):this.$el.on(o,s,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className"));var r=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(r,!1)}}}),e.sync=function(t,r,i){var o=A[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(i.url||(s.url=n.result(r,"url")||C()),null!=i.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||i.emulateJSON||(s.processData=!1),"PATCH"===s.type&&x&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=i.xhr=e.ajax(n.extend(s,i));return r.trigger("request",r,u,i),u};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,T=/\*\w+/g,j=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,a,{initialize:function(){},route:function(t,r,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return e.history.route(t,function(n){var s=o._extractParameters(t,n);o.execute(i,s),o.trigger.apply(o,["route:"+r].concat(s)),o.trigger("route",r,s),e.history.trigger("route",o,r,s)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(j,"\\$&").replace(S,"(?:$1)?").replace(k,function(t,e){return e?t:"([^/?]+)"}).replace(T,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}});var O=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,$=/msie [\w.]+/,P=/\/$/,I=/#.*$/;O.started=!1,n.extend(O.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(P,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(R,"")},start:function(t){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,o=$.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);if(this.root=("/"+this.root+"/").replace(N,"/"),o&&this._wantsHashChange){var s=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(R,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!O.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(I,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new O;var M=function(t,e){var r,i=this;r=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,e);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,t&&n.extend(r.prototype,t),r.__super__=i.prototype,r};f.extend=p.extend=E.extend=b.extend=O.extend=M;var C=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}};return e}),function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.NProgress=e()}(this,function(){function t(t,e,n){return e>t?e:t>n?n:t}function e(t){return 100*(-1+t)}function n(t,n,r){var i;return i="translate3d"===c.positionUsing?{transform:"translate3d("+e(t)+"%,0,0)"}:"translate"===c.positionUsing?{transform:"translate("+e(t)+"%,0)"}:{"margin-left":e(t)+"%"},i.transition="all "+n+"ms "+r,i}function r(t,e){var n="string"==typeof t?t:s(t);return n.indexOf(" "+e+" ")>=0}function i(t,e){var n=s(t),i=n+e;r(n,e)||(t.className=i.substring(1))}function o(t,e){var n,i=s(t);r(t,e)&&(n=i.replace(" "+e+" "," "),t.className=n.substring(1,n.length-1))}function s(t){return(" "+(t.className||"")+" ").replace(/\s+/gi," ")}function a(t){t&&t.parentNode&&t.parentNode.removeChild(t)}var u={};u.version="0.1.6";var c=u.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};u.configure=function(t){var e,n;for(e in t)n=t[e],void 0!==n&&t.hasOwnProperty(e)&&(c[e]=n);return this},u.status=null,u.set=function(e){var r=u.isStarted();e=t(e,c.minimum,1),u.status=1===e?null:e;var i=u.render(!r),o=i.querySelector(c.barSelector),s=c.speed,a=c.easing;return i.offsetWidth,l(function(t){""===c.positionUsing&&(c.positionUsing=u.getPositioningCSS()),h(o,n(e,s,a)),1===e?(h(i,{transition:"none",opacity:1}),i.offsetWidth,setTimeout(function(){h(i,{transition:"all "+s+"ms linear",opacity:0}),setTimeout(function(){u.remove(),t()},s)},s)):setTimeout(t,s)}),this},u.isStarted=function(){return"number"==typeof u.status},u.start=function(){u.status||u.set(0);var t=function(){setTimeout(function(){u.status&&(u.trickle(),t())},c.trickleSpeed)};return c.trickle&&t(),this},u.done=function(t){return t||u.status?u.inc(.3+.5*Math.random()).set(1):this},u.inc=function(e){var n=u.status;return n?("number"!=typeof e&&(e=(1-n)*t(Math.random()*n,.1,.95)),n=t(n+e,0,.994),u.set(n)):u.start()},u.trickle=function(){return u.inc(Math.random()*c.trickleRate)},function(){var t=0,e=0;u.promise=function(n){return n&&"resolved"!=n.state()?(0==e&&u.start(),t++,e++,n.always(function(){e--,0==e?(t=0,u.done()):u.set((t-e)/t)}),this):this}}(),u.render=function(t){if(u.isRendered())return document.getElementById("nprogress");i(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=c.template;var r,o=n.querySelector(c.barSelector),s=t?"-100":e(u.status||0),l=document.querySelector(c.parent);return h(o,{transition:"all 0 linear",transform:"translate3d("+s+"%,0,0)"}),c.showSpinner||(r=n.querySelector(c.spinnerSelector),r&&a(r)),l!=document.body&&i(l,"nprogress-custom-parent"),l.appendChild(n),n},u.remove=function(){o(document.documentElement,"nprogress-busy"),o(document.querySelector(c.parent),"nprogress-custom-parent");var t=document.getElementById("nprogress");t&&a(t)},u.isRendered=function(){return!!document.getElementById("nprogress")},u.getPositioningCSS=function(){var t=document.body.style,e="WebkitTransform"in t?"Webkit":"MozTransform"in t?"Moz":"msTransform"in t?"ms":"OTransform"in t?"O":"";return e+"Perspective"in t?"translate3d":e+"Transform"in t?"translate":"margin"};var l=function(){function t(){var n=e.shift();n&&n(t)}var e=[];return function(n){e.push(n),1==e.length&&t()}}(),h=function(){function t(t){return t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()})}function e(t){var e=document.body.style;if(t in e)return t;for(var n,r=i.length,o=t.charAt(0).toUpperCase()+t.slice(1);r--;)if(n=i[r]+o,n in e)return n;return t}function n(n){return n=t(n),o[n]||(o[n]=e(n))}function r(t,e,r){e=n(e),t.style[e]=r}var i=["Webkit","O","Moz","ms"],o={};return function(t,e){var n,i,o=arguments;if(2==o.length)for(n in e)i=e[n],void 0!==i&&e.hasOwnProperty(n)&&r(t,n,i);else r(t,o[1],o[2])}}();return u});/*! modernizr-on 2013-05-01 */
var Modernizr=function(t,e){var n=[];t._version.split(".")[0]>2&&window.console&&void 0;var r=function(){for(var i,o=n.length;o--;)i=n[o][0],t[i]!==e&&(n[o][1](t[i]),n.splice(o,1));n.length&&setTimeout(r,100)};return t.on=function(t,e){n.push([t,e]),setTimeout(r,0)},t}(Modernizr);/*! https://mths.be/includes v1.0.0 by @mathias */
String.prototype.includes||!function(){"use strict";var t={}.toString,e=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(r){}return n}(),n="".indexOf,r=function(e){if(null==this)throw TypeError();var r=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var i=r.length,o=String(e),s=o.length,a=arguments.length>1?arguments[1]:void 0,u=a?Number(a):0;u!=u&&(u=0);var c=Math.min(Math.max(u,0),i);return s+c>i?!1:-1!=n.call(r,o,u)};e?e(String.prototype,"includes",{value:r,configurable:!0,writable:!0}):String.prototype.includes=r}();
/*! MIT (c) Shinnosuke Watanabe */
(function(){"use strict";var e,t,n,i,r,o,a,s,c,l,u,d,h,f,p,m,g,v,b,w,x,k,T,j,y,z,B,I,P,A;t=$(window),e=$(document),jQuery.fn.safeAnimate=function(){var e;return e=Array.prototype.slice,function(){var t,n;return t=e.call(arguments,0),(n=this.stop()).animate.apply(n,t)}}(),$.fn.transition=$.fn.animate,$.getScript("https://cdnjs.cloudflare.com/ajax/libs/jquery.transit/0.9.12/jquery.transit.min.js",function(){return $.support.transition?void 0:$.fn.transition=$.fn.animate}),jQuery.fn.centerHeight=function(){var e;return e=$(this),Math.round(e.position().top+.5*e.height())},jQuery.fn._enableWebP=function(){return this},Modernizr.on("webp",function(e){return e?jQuery.fn._enableWebP=function(){return this.each(function(){var e,t;return e=$(this),t=e.attr("data-original").replace("img/","img/webp/").replace(".jpg",".webp").replace(".png",".webp"),e.attr("data-original",t)}),this}:void 0}),"undefined"!=typeof document.hidden?(I="hidden",A="visibilitychange"):"undefined"!=typeof document.mozHidden?(I="mozHidden",A="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(I="msHidden",A="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(I="webkitHidden",A="webkitvisibilitychange"),z=B=P=null,$(function(){var e;return P=new w,z=new n({model:new p}),B=new c,e=new g,Backbone.history.start({pushState:!0,root:"/"}),$(".intersection .point > div").css("visibility","visible")}),p=Backbone.Model.extend({initialize:function(){return this.group=new l,this.article=new i}}),l=Backbone.Model.extend({initialize:function(){return this.set("id","home"),this.set("initialized",!0),this.on("change:id",function(e){return function(){return"home"===e.previous("id")||void 0===e.previous("id")?e.trigger("open"):"home"===e.get("id")&&e.trigger("close"),e.set("initialized",!0)}}(this))}}),i=Backbone.Model.extend({initialize:function(){return this.set("opened",!1),this.set("initialized",!0),this.on("change:opened",function(e){return function(t,n){return e.trigger(n?"open":"close"),e.set("initialized",!0)}}(this))},parseResponse:function(e){var t;return t=$(e),document.title=t.filter("title").text(),this.set({projectInfo:{time:t.find("#article-info .time").text()||null,roles:t.find("#article-info .roles").text()}}),this.set("isProject",this.checkIsProject())},checkIsProject:function(){return null!==this.get("projectInfo").time}}),T=Backbone.Model.extend({initialize:function(){return this.set("destination","0")}}),w=Backbone.Router.extend({prev:Backbone.history.fragment,routes:{"":"index","index.html":"index","about/":"about","projects/":"projects","projects/:name/":"project-single"},index:function(){return z.model.article.set("opened",!1),z.model.group.set({id:"home",name:""}),B.render("/",function(){return B.show(),(new h).render()})},about:function(){return z.model.article.set("opened",!1),z.model.group.set({id:"about",name:"渡邉伸之介について"}),B.render("/about/",function(){return B.show()})},projects:function(){return z.model.article.set("opened",!1),z.model.group.set({id:"projects",name:"プロジェクト一覧"}),B.render("/projects/",function(){return B.show(),(new b).render(),new x})},"project-single":function(e){return z.verticalNav.hideArticleTitleAndInfo(),z.model.article.set("opened",!0),z.model.group.set({id:"projects",name:"プロジェクト一覧"}),B.render("/projects/"+e+"/",function(){return(new v).render()})}}),NProgress.configure({trickleRate:.2,trickleSpeed:265,showSpinner:!1}),n=Backbone.View.extend({el:"#container",events:{"click a:not([target])":"setInternalLink"},initialize:function(){return $.getScript("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.3/fastclick.min.js",function(){return FastClick.attach(this.el)}),this.tabs=new k,this.verticalNav=new y,this.model.group.on("close",function(e){return function(){return e.verticalNav.closeGroup()}}(this)),this.model.group.on("open",function(e){return function(){return e.model.group.get("initialized")?e.verticalNav.openGroup():e.verticalNav.initializeGroup()}}(this)),this.model.group.on("change:id",function(e){return function(t,n){return e.tabs.activate(n),e.verticalNav.setLink(n)}}(this)),this.model.group.on("change:name",function(e){return function(t,n){return e.verticalNav.renderGroup(n)}}(this)),this.model.article.on("close",function(e){return function(){return e.verticalNav.closeArticle()}}(this)),this.model.article.on("open",function(e){return function(){return e.verticalNav.openArticle()}}(this)),this.model.article.on("change:projectInfo",function(e){return function(t,n){return e.model.article.get("opened")&&e.verticalNav.renderArticleTitleAndInfo(n),e.verticalNav.render()}}(this)),e.on(A,function(e){return function(){return e.verticalNav.render(e.model.get("basename"))}}(this))},setInternalLink:function(e){return e.preventDefault(),B.hide(function(){return P.navigate(e.currentTarget.pathname,{trigger:!0}),P.prev===Backbone.history.fragment&&B.show(),scrollTo(0,0)})},refresh:function(){return this.verticalNav.hideArticleTitleAndInfo(),this.model.categorize()}}),k=Backbone.View.extend({el:"#tabs > a",activate:function(e){return this.$el.filter(".active").removeClass("active").end().filter("[data-group="+e+"]").addClass("active")}}),c=Backbone.View.extend({el:"main",hide:function(e){return NProgress.set(0).start(),this.$el.fadeTo(8,.01,function(){return e?e():void 0})},show:function(e){return NProgress.done(),this.$el.fadeTo(80,1),P.prev=Backbone.history.fragment,e?e():void 0},render:function(e,t){return $.ajax({url:e,dataType:"html"}).done(function(e){return function(n){var i;return z.model.article.parseResponse(n),i=document.createElement("div"),e.$el.html($(i).append($.parseHTML(n)).find("#content")),t()}}(this))}}),b=Backbone.View.extend({el:"img[data-original]",render:function(){return this.$el.removeAttr("src")._enableWebP().lazyload({effect:"fadeIn",threshold:.15*t.height(),placeholder:"/img/transparent.gif"})}}),h=Backbone.View.extend({reset:function(){return $(".wide-image").css("width","100%"),$(".featured-works").css("visibility","visible").fadeTo(750,1)},render:function(){return this.reset(),$("img[data-original]").removeAttr("src")._enableWebP().lazyload({effect:"fadeIn",threshold:.25*t.height(),skip_invisible:!1,placeholder:"/img/transparent.gif"}),$("#logo").delay(200).transition({backgroundPosition:"0px 0px"},500)}}),y=Backbone.View.extend({el:"header div.intersection",initialize:function(){return this.group=new d,this.articleTitle=new s,this.articleInfo=new o,this.points=new f,this.line=new j({model:new T}),$("#article-title, #article-info").hide()},hide:function(){return this.line.hide(),this.$el.fadeOut(42)},setLink:function(e){return this.$el.find("a").attr("href",function(t,n){return n.replace(/\/[^\/]+?\//,"/"+e.name+"/")})},initializeGroup:function(){return $("#first-location").show()},openGroup:function(){return this.initializeGroup(),z.model.article.get("opened")?void 0:this.line.extendToFirst()},closeGroup:function(){return $("#article-title, #article-info").fadeOut(42),this.hide()},renderGroup:function(e){return this.group.update(e)},closeArticle:function(){return $("#article-title, #article-info").hide(),this.hideArticleTitleAndInfo(),this.line.extendToFirst()},openArticle:function(){return this.$el.show()},renderArticleTitleAndInfo:function(e){return this.articleTitle.update(),this.articleInfo.update(e),setTimeout(function(e){return function(){return e.line.extendToArticleTitle()}}(this),100)},render:function(){return this.articleTitle.setPointTop(),this.articleInfo.setPointTop()},hideArticleTitleAndInfo:function(){return this.articleInfo.hide(),this.articleTitle.hide()}}),m=Backbone.View.extend({hide:function(){return this.$el.stop().hide()},show:function(){return this.$el.stop().fadeIn()},setPositionTop:function(e){return this.$el.css({top:""+e+"px"})}}),d=Backbone.View.extend({el:"#first-location",initialize:function(){return this.point=new m({el:"#first-point"}),this.label=new u({el:"#first-location .label"})},update:function(e){return e&&(this.label.update(e),this.point.show()),this.point.setPositionTop(Math.ceil(.5*this.$el.height()))}}),u=Backbone.View.extend({update:function(e){return this.$el.text(e)}}),s=Backbone.View.extend({el:"#article-title",initialize:function(){return this.point=new m({el:"#article-title-point"}),this.label=new a({el:"#article-title .label"})},hide:function(){return this.label.hide(),this.point.hide()},update:function(){return this.label.update(),this.point.show()},setPointTop:function(){return this.point.setPositionTop(Math.ceil(.5*this.$el.height()))}}),a=Backbone.View.extend({hide:function(){return this.$el.finish().hide().text("")},update:function(){return this.$el.text(document.title.replace(/\ -\ .*/,"")).hide().fadeIn(420)}}),o=Backbone.View.extend({el:"#article-info",initialize:function(){return this.point=new m({el:"#article-info-point"}),this.label=new r({el:"#article-info .label"})},hide:function(){return this.label.hide(),this.point.hide()},update:function(e){return this.label.update(e),this.point.show()},setPointTop:function(){return this.point.setPositionTop(Math.ceil(.5*this.$el.height()))}}),r=Backbone.View.extend({hide:function(){return this.$el.finish().hide(),this.$el.find(".time").text(""),this.$el.find(".roles").text("")},update:function(e){return e&&(this.$el.find(".time").text(e.time),this.$el.find(".roles").text(e.roles)),this.$el.hide().fadeIn(420)}}),f=Backbone.View.extend({el:"div.intersection .point > div",hide:function(){var e;return e=this.$el.eq(0)},show:function(){return this.$el.fadeIn()}}),j=Backbone.View.extend({el:"#vertical-line",initialize:function(){return this.$groupPoint=$("#first-location"),this.$articlePoint=$("#article-info")},_extendTo:function(e,t){var n;return n=e?e.centerHeight():"0",this.$el.stop().transition({height:n+"px"},t)},extendTo:function(e,t){return this._extendTo(e,t),setTimeout(function(n){return function(){return n._extendTo(e,.5*t)}}(this),150)},hide:function(){return this.extendTo(0,160)},extendToFirst:function(){return this.extendTo(this.$groupPoint,160)},extendToArticleTitle:function(){return this.extendTo(this.$articlePoint,380)}}),g=Backbone.View.extend({el:"#prev-article-button, #next-article-button",initialize:function(){return t.on("resize",this.render)},render:function(){Modernizr.mq("only screen and (min-width: 1280px)")}}),v=Backbone.View.extend({el:"img[data-original]",render:function(){var e,n;return n=$(".video-wrapper").length>0,n&&B.show(),e=$(".image-wrapper"),this.$el.removeAttr("src")._enableWebP().lazyload({effect:"fadeIn",threshold:.5*t.height(),placeholder:"/img/transparent.gif",effect_speed:{start:function(){var t;return t=$(this),!n&&t.is(".project-image:eq(0)")&&(t.finish(),B.show()),e.find(this).unwrap()}}})}}),x=Backbone.View.extend({el:"#show-more-commits span",events:{click:"show"},show:function(){return this.$el.remove(),$("#commits-rest").fadeIn()}})}).call(this);